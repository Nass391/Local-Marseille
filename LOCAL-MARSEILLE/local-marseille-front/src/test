import React, { useState, useEffect } from "react";
import { useLocation } from "react-router-dom";
import { getOneProducteur } from '../api/apiProducteur'
import { icons } from "react-icons/lib";
import Background from "../assets/background.jpeg";

const ViewProducteurDetails = () => {

    const [producteur, setProducteur] = useState(null);

    const location = useLocation();
    const data = location.state;
    console.log("PRODUCTEUR DATA", data.id);

    // 3 - AFFICHAGE DES PLACES & HORAIRES (à partir des producteurs)
    const renderProducteursPlaces = (p) => {
        return p?.map(producteurplace => {
            return (
                <div className="ProducteurPlaces" key={producteurplace.id} >
                    {producteurplace.titre}
                    <div>{renderPlacesHoraires(producteurplace.horaires)}</div>
                </div>
            );
        })
    };
    // AFFICHAGE DES PRODUITS (à partir des producteurs)
    const renderProducteursProduits = (p) => {
        return p?.map(producteurproduit => {
            return (
                <div key={producteurproduit.id} >
                    {producteurproduit.label}
                </div>

            );
        })
    };
    // AFFICHAGE DES HORAIRES (à partir des places)
    const renderPlacesHoraires = (p) => {
        return p?.map(horaire => {
            return (
                <div key={horaire.id} >
                    {horaire.jour} : {horaire.heure_debut} - {horaire.heure_fin} / {horaire.frequence}
                </div>
            );
        })
    };
    useEffect(() => {
        getOneProducteur(data.id).then((response) => {
            setProducteur(response)
        })
    }, []);


    return (
        <>
        <div>

               
                <div className="background">
                    <img className="backgroundImage" src={Background} width="100%" height={600} alt="producteur" />
               </div>
                <div className="Divprincipal">
                    <div className="CartProducteur">

                    </div>
                    <div className="ViewProducteurDetail">
                        <strong>{producteur?.nom} {producteur?.prenom}</strong>
                    </div>
                    <img className="img" src={producteur?.image} width={450} height={400} alt="producteur" />
   <div className="DetailsProducteur">
                    <div className="Producteurexploitation">
                        {producteur?.nom_exploitation}
                    </div>
                  
                    <div className="ProducteureAdressExploitation">
                        <img width={30} height={30} src="/adress.png" />
                        {producteur?.adresse_exploitation}

                    </div>
                    <div className="Producteuremail">
                        <img className="emailLogo" width={20} height={20} src="/email.png" />
                        {producteur?.email}
                    </div>
                    <div className="ProducteurSousTitre">
                        {producteur?.sous_titre}
                    </div>
                    <div className="DescriptionActivité">
                        {producteur?.description_activite}
                    </div >
                    <div className="MarketSpot"><h4> Nous sommes présents sur les marchés :</h4></div>
                    <div>
                        {renderProducteursPlaces(producteur?.places)}
                    </div>
                    <div className="NosProduct"> <h4>Nos produits:</h4>
                        {renderProducteursProduits(producteur?.produits)}
                        </div>
                        <div className="Producteuremail">
                            {renderProducteursProduits(data.produits)}
                        </div>
                    </div>
                
            </div>
            </div>
        </>
    );
}
export default ViewProducteurDetails;